<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>baseline. — Average is not healthy.</title>
<meta name="description" content="Build your health record once. Use it everywhere. Take it with you forever. Free, local-first health coverage scoring.">
<meta property="og:title" content="baseline. — Average is not healthy.">
<meta property="og:description" content="I ranked 40 health metrics by ROI. The top 10 cost $143/year combined. Several are free.">
<meta property="og:type" content="website">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="baseline. — Average is not healthy.">
<meta name="twitter:description" content="Build your health record once. Use it everywhere. Take it with you forever.">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Barlow+Condensed:wght@400;600;700;800&family=DM+Sans:wght@300;400;500;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
<style>
*, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }

:root {
  --bg: #08080a;
  --bg-elevated: #0e0e11;
  --border: #181820;
  --text: #f0f0f0;
  --text-muted: #7a7a88;
  --text-dim: #3e3e4a;
  --red: #c83c3c;
  --red-dim: rgba(200, 60, 60, 0.10);
  --font-display: 'Barlow Condensed', sans-serif;
  --font-body: 'DM Sans', -apple-system, sans-serif;
  --font-mono: 'JetBrains Mono', monospace;
}

html { scroll-behavior: smooth; }

body {
  background: var(--bg);
  color: var(--text);
  font-family: var(--font-body);
  line-height: 1.6;
  -webkit-font-smoothing: antialiased;
  overflow-x: hidden;
  position: relative;
}

/* ── Subtle grid (from banner) ── */
body::before {
  content: '';
  position: fixed;
  inset: 0;
  background-image:
    linear-gradient(rgba(255,255,255,0.035) 1px, transparent 1px),
    linear-gradient(90deg, rgba(255,255,255,0.035) 1px, transparent 1px);
  background-size: 60px 60px;
  pointer-events: none;
  z-index: 0;
  mask-image: radial-gradient(ellipse 90% 70% at 50% 25%, black 0%, transparent 65%);
  -webkit-mask-image: radial-gradient(ellipse 90% 70% at 50% 25%, black 0%, transparent 65%);
}

a { color: var(--text-muted); text-decoration: none; }
a:hover { color: var(--text); }

.container {
  max-width: 680px;
  margin: 0 auto;
  padding: 0 28px;
  position: relative;
  z-index: 1;
}

/* ── Hero ── */
.hero {
  padding: 140px 0 120px;
  text-align: center;
}

.logo {
  font-family: var(--font-body);
  font-size: 1.1rem;
  font-weight: 500;
  letter-spacing: 0.5px;
  color: rgba(225, 225, 225, 0.35);
  margin-bottom: 56px;
}

.logo .period { color: rgba(225, 225, 225, 0.18); }

h1 {
  font-family: var(--font-display);
  font-size: clamp(3rem, 8vw, 5rem);
  font-weight: 700;
  line-height: 1.0;
  letter-spacing: -0.5px;
  text-transform: uppercase;
  margin-bottom: 36px;
}

h1 .line-neg {
  display: block;
  color: var(--text);
}

h1 .word-not {
  color: var(--red);
  display: inline-block;
  transform: rotate(-8deg);
  position: relative;
  top: -2px;
  margin: 0 4px;
}

.hero-sub {
  font-size: 1.05rem;
  color: var(--text-muted);
  max-width: 440px;
  margin: 0 auto 52px;
  font-weight: 300;
  line-height: 1.6;
}

.signup-form {
  display: flex;
  gap: 8px;
  max-width: 400px;
  margin: 0 auto 14px;
}

.signup-form input {
  flex: 1;
  padding: 13px 16px;
  background: var(--bg-elevated);
  border: 1px solid var(--border);
  border-radius: 5px;
  color: var(--text);
  font-family: var(--font-mono);
  font-size: 0.82rem;
  outline: none;
  transition: border-color 0.2s;
}

.signup-form input::placeholder { color: var(--text-dim); }
.signup-form input:focus { border-color: rgba(240,240,240,0.2); }

.signup-form button {
  padding: 13px 24px;
  background: var(--text);
  color: var(--bg);
  border: none;
  border-radius: 5px;
  font-family: var(--font-body);
  font-weight: 700;
  font-size: 0.85rem;
  cursor: pointer;
  white-space: nowrap;
  transition: opacity 0.2s;
  letter-spacing: 0.3px;
}

.signup-form button:hover { opacity: 0.85; }

.trust-line {
  font-family: var(--font-mono);
  font-size: 0.72rem;
  color: var(--text-dim);
  letter-spacing: 0.06em;
}

.score-link {
  position: fixed;
  bottom: 32px;
  right: 32px;
  font-family: var(--font-mono);
  font-size: 0.75rem;
  font-weight: 500;
  color: rgba(240, 240, 240, 0.7);
  letter-spacing: 0.04em;
  transition: all 0.25s;
  padding: 10px 18px;
  background: rgba(14, 14, 17, 0.9);
  border: 1px solid rgba(255,255,255,0.15);
  border-radius: 5px;
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
  z-index: 50;
}

.score-link:hover {
  color: var(--text);
  border-color: rgba(255,255,255,0.3);
  background: rgba(14, 14, 17, 0.95);
}

.score-link.hidden { opacity: 0; pointer-events: none; }

/* ── Divider ── */
.divider {
  width: 40px;
  height: 1px;
  background: var(--border);
  margin: 0 auto;
}

/* ── Bridge ── */
.bridge {
  padding: 80px 0;
  text-align: center;
}

.bridge p {
  font-family: var(--font-display);
  font-size: clamp(1.4rem, 3.5vw, 2rem);
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 2px;
  color: rgba(240, 240, 240, 0.3);
}

/* ── Section base ── */
section {
  padding: 96px 0;
}

.section-label {
  font-family: var(--font-display);
  font-size: 0.8rem;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 4px;
  color: var(--text-dim);
  margin-bottom: 20px;
}

h2 {
  font-family: var(--font-display);
  font-size: clamp(1.6rem, 4vw, 2.2rem);
  font-weight: 700;
  line-height: 1.1;
  letter-spacing: -0.3px;
  text-transform: uppercase;
  margin-bottom: 32px;
}

/* ── Problem ── */
.pain-points {
  display: flex;
  flex-direction: column;
  gap: 0;
  margin-bottom: 40px;
}

.pain-point {
  display: flex;
  align-items: baseline;
  gap: 16px;
  padding: 16px 0;
  border-bottom: 1px solid rgba(255,255,255,0.04);
}

.pain-point:last-child { border-bottom: none; }

.pain-icon {
  font-family: var(--font-mono);
  font-size: 0.72rem;
  color: var(--red);
  flex-shrink: 0;
}

.pain-point p {
  font-size: 0.92rem;
  color: var(--text-muted);
  line-height: 1.55;
}

.stat-callout {
  padding: 24px 28px;
  background: var(--red-dim);
  border-left: 2px solid var(--red);
  border-radius: 0 4px 4px 0;
  font-size: 0.9rem;
  color: var(--text-muted);
  line-height: 1.7;
}

.stat-callout strong { color: var(--text); }

/* ── Coverage ── */
.coverage-visual {
  display: flex;
  flex-direction: column;
  gap: 12px;
  margin: 40px 0;
}

.coverage-bar {
  display: flex;
  align-items: center;
  gap: 14px;
}

.coverage-bar .label {
  font-family: var(--font-mono);
  font-size: 0.7rem;
  color: var(--text-dim);
  width: 110px;
  flex-shrink: 0;
  text-align: right;
}

.bar-track {
  flex: 1;
  height: 3px;
  background: rgba(255,255,255,0.05);
  border-radius: 2px;
  overflow: hidden;
}

.bar-fill {
  height: 100%;
  border-radius: 2px;
  background: var(--text);
  transition: width 1.5s ease;
}

.bar-fill.high { opacity: 0.7; }
.bar-fill.med { opacity: 0.4; }
.bar-fill.low { background: var(--red); opacity: 0.6; }

.coverage-bar .pct {
  font-family: var(--font-mono);
  font-size: 0.7rem;
  color: var(--text-dim);
  width: 36px;
}

.journey-text {
  margin-top: 36px;
  font-size: 0.92rem;
  color: var(--text-muted);
  line-height: 1.7;
}

.journey-text strong { color: var(--text); }

/* ── Top 10 ── */
.metrics-list {
  display: flex;
  flex-direction: column;
  gap: 0;
  margin-top: 28px;
}

.metric-row {
  display: flex;
  align-items: center;
  gap: 16px;
  padding: 13px 0;
  border-bottom: 1px solid rgba(255,255,255,0.04);
}

.metric-row:last-child { border-bottom: none; }

.metric-rank {
  font-family: var(--font-mono);
  font-size: 0.75rem;
  font-weight: 500;
  color: var(--text-dim);
  width: 24px;
  flex-shrink: 0;
}

.metric-name {
  flex: 1;
  font-size: 0.92rem;
  color: var(--text);
}

.metric-cost {
  font-family: var(--font-mono);
  font-size: 0.78rem;
  color: var(--text-muted);
  text-align: right;
  white-space: nowrap;
}

.metric-cost.free {
  color: var(--text);
  font-weight: 500;
}

.metrics-note {
  margin-top: 28px;
  font-family: var(--font-mono);
  font-size: 0.72rem;
  color: var(--text-dim);
}

/* ── Cost Comparison ── */
.compare-table {
  width: 100%;
  margin: 36px 0 28px;
  border-collapse: separate;
  border-spacing: 0;
}

.compare-table th,
.compare-table td {
  padding: 14px 16px;
  text-align: left;
  font-size: 0.82rem;
  border-bottom: 1px solid rgba(255,255,255,0.04);
}

.compare-table th {
  font-family: var(--font-mono);
  font-size: 0.68rem;
  font-weight: 500;
  color: var(--text-dim);
  letter-spacing: 0.08em;
  text-transform: uppercase;
  padding-bottom: 12px;
  border-bottom: 1px solid rgba(255,255,255,0.08);
}

.compare-table td:first-child {
  color: var(--text-muted);
  font-weight: 500;
}

.compare-table .row-baseline td {
  color: var(--text);
  background: rgba(255,255,255,0.02);
}

.compare-table .row-baseline td:first-child {
  color: var(--text);
  font-weight: 700;
}

.compare-table td.price {
  font-family: var(--font-mono);
  font-size: 0.78rem;
  white-space: nowrap;
}

.compare-table td.coverage-cell {
  font-family: var(--font-mono);
  font-size: 0.78rem;
}

.compare-table .coverage-inline {
  display: inline-flex;
  align-items: center;
  gap: 8px;
}

.compare-table .mini-bar {
  display: inline-block;
  height: 3px;
  border-radius: 2px;
  background: var(--text-muted);
  opacity: 0.5;
  vertical-align: middle;
}

.compare-table .row-baseline .mini-bar {
  background: var(--text);
  opacity: 0.8;
}

.compare-note {
  font-size: 0.82rem;
  color: var(--text-muted);
  line-height: 1.7;
  margin-top: 12px;
}

.compare-note strong { color: var(--text); }

@media (max-width: 600px) {
  .compare-table th,
  .compare-table td {
    padding: 10px 8px;
    font-size: 0.75rem;
  }
  .compare-table td.price { font-size: 0.72rem; }
}

/* ── How It Works ── */
.steps {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 1px;
  margin: 36px 0;
  background: rgba(255,255,255,0.04);
  border-radius: 8px;
  overflow: hidden;
}

.step {
  padding: 28px 16px;
  background: var(--bg);
  text-align: center;
}

.step-num {
  font-family: var(--font-mono);
  font-size: 0.62rem;
  font-weight: 500;
  color: var(--text-dim);
  letter-spacing: 0.1em;
  margin-bottom: 12px;
}

.step-title {
  font-family: var(--font-display);
  font-weight: 700;
  font-size: 1.05rem;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  margin-bottom: 8px;
}

.step-desc {
  font-size: 0.75rem;
  color: var(--text-dim);
  line-height: 1.45;
}

.how-details {
  margin-top: 28px;
  font-size: 0.88rem;
  color: var(--text-muted);
  line-height: 1.65;
}

.how-details code {
  font-family: var(--font-mono);
  font-size: 0.78rem;
  background: var(--bg-elevated);
  padding: 2px 7px;
  border-radius: 3px;
  color: var(--text);
}

/* ── Story ── */
.story-block {
  margin-top: 24px;
}

.story-block p {
  font-size: 0.92rem;
  color: var(--text-muted);
  line-height: 1.75;
  margin-bottom: 20px;
}

.story-block p:last-child { margin-bottom: 0; }
.story-block strong { color: var(--text); }

.insulin-callout {
  margin-top: 32px;
  padding: 24px 28px;
  background: var(--red-dim);
  border-left: 2px solid var(--red);
  border-radius: 0 4px 4px 0;
  font-family: var(--font-mono);
  font-size: 0.78rem;
  color: var(--text-muted);
  line-height: 1.7;
}

.insulin-callout strong { color: var(--text); }

/* ── CTA ── */
.cta-section {
  text-align: center;
  padding: 120px 0;
}

.cta-section h2 {
  margin-bottom: 16px;
  font-size: clamp(1.8rem, 5vw, 2.8rem);
}

.cta-sub {
  font-size: 0.9rem;
  color: var(--text-muted);
  margin-bottom: 40px;
}

.ai-link {
  color: var(--text);
  font-weight: 500;
  border-bottom: 1px solid rgba(255,255,255,0.2);
  padding-bottom: 1px;
  transition: border-color 0.2s;
}

.ai-link:hover {
  color: var(--text);
  border-bottom-color: rgba(255,255,255,0.5);
}

/* ── Footer ── */
footer {
  padding: 48px 0;
  border-top: 1px solid var(--border);
  text-align: center;
}

footer p {
  font-family: var(--font-mono);
  font-size: 0.72rem;
  color: var(--text-dim);
  line-height: 2;
}

/* ── Mobile ── */
@media (max-width: 600px) {
  .hero { padding: 100px 0 80px; }
  section { padding: 72px 0; }

  h1 { font-size: clamp(2.4rem, 10vw, 3.5rem); }

  .signup-form {
    flex-direction: column;
  }

  .signup-form button {
    padding: 14px;
  }

  .coverage-bar .label {
    width: 80px;
    font-size: 0.65rem;
  }

  .steps {
    grid-template-columns: 1fr 1fr;
  }

  .cta-section { padding: 80px 0; }
}

/* ── Form success state ── */
.form-success {
  display: none;
  font-family: var(--font-mono);
  font-size: 0.82rem;
  color: var(--text-muted);
  padding: 14px 0;
}

/* ── Intake Form ── */
.intake {
  max-width: 560px;
  margin: 0 auto;
}

.intake-progress {
  display: flex;
  gap: 4px;
  margin-bottom: 48px;
}

.intake-progress .pip {
  flex: 1;
  height: 2px;
  background: rgba(255,255,255,0.08);
  border-radius: 1px;
  transition: background 0.3s;
}

.intake-progress .pip.active {
  background: rgba(255,255,255,0.35);
}

.intake-progress .pip.done {
  background: var(--red);
  opacity: 0.6;
}

.intake-step {
  display: none;
}

.intake-step.active {
  display: block;
}

.intake-step h3 {
  font-family: var(--font-display);
  font-size: 1.6rem;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: -0.3px;
  margin-bottom: 10px;
  color: var(--text);
}

.intake-step .step-hint {
  font-size: 0.88rem;
  color: var(--text-muted);
  margin-bottom: 28px;
  line-height: 1.5;
}

/* Radio / select groups */
.option-group {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  margin-bottom: 32px;
}

.option-group.vertical {
  flex-direction: column;
  gap: 0;
}

.opt-btn {
  padding: 11px 20px;
  background: var(--bg-elevated);
  border: 1px solid rgba(255,255,255,0.1);
  border-radius: 5px;
  color: rgba(240, 240, 240, 0.7);
  font-family: var(--font-body);
  font-size: 0.9rem;
  cursor: pointer;
  transition: all 0.15s;
  user-select: none;
}

.opt-btn:hover {
  border-color: rgba(255,255,255,0.22);
  color: var(--text);
}

.opt-btn.selected {
  border-color: rgba(255,255,255,0.3);
  color: var(--text);
  background: rgba(255,255,255,0.07);
}

/* Checklist items */
.check-item {
  display: flex;
  align-items: center;
  gap: 14px;
  padding: 13px 0;
  border-bottom: 1px solid rgba(255,255,255,0.05);
  cursor: pointer;
  transition: color 0.15s;
  user-select: none;
}

.check-item:last-child { border-bottom: none; }
.check-item:hover .check-label { color: var(--text); }

.check-box {
  width: 20px;
  height: 20px;
  border: 1.5px solid rgba(255,255,255,0.15);
  border-radius: 4px;
  flex-shrink: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.15s;
  font-size: 0.72rem;
}

.check-item.checked .check-box {
  border-color: rgba(255,255,255,0.4);
  background: rgba(255,255,255,0.1);
}

.check-item.checked .check-box::after {
  content: '✓';
  color: var(--text);
}

.check-label {
  font-size: 0.92rem;
  color: rgba(240, 240, 240, 0.65);
  line-height: 1.4;
}

.check-item:hover .check-label,
.check-item.checked .check-label {
  color: var(--text);
}

.check-label .sub {
  display: block;
  font-size: 0.78rem;
  color: var(--text-muted);
  margin-top: 2px;
}

/* Navigation */
.intake-nav {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-top: 40px;
  padding-top: 24px;
  border-top: 1px solid rgba(255,255,255,0.04);
}

.intake-nav .back-btn {
  font-family: var(--font-body);
  font-size: 0.85rem;
  color: var(--text-muted);
  background: none;
  border: none;
  cursor: pointer;
  padding: 8px 0;
  transition: color 0.15s;
}

.intake-nav .back-btn:hover { color: var(--text); }
.intake-nav .back-btn.hidden { visibility: hidden; }

.intake-nav .next-btn {
  padding: 11px 28px;
  background: var(--text);
  color: var(--bg);
  border: none;
  border-radius: 5px;
  font-family: var(--font-body);
  font-weight: 700;
  font-size: 0.85rem;
  cursor: pointer;
  transition: opacity 0.2s;
  letter-spacing: 0.3px;
}

.intake-nav .next-btn:hover { opacity: 0.85; }

/* Open text input */
.intake-textarea {
  width: 100%;
  min-height: 80px;
  padding: 14px 16px;
  background: var(--bg-elevated);
  border: 1px solid var(--border);
  border-radius: 5px;
  color: var(--text);
  font-family: var(--font-body);
  font-size: 0.88rem;
  line-height: 1.5;
  resize: vertical;
  outline: none;
  transition: border-color 0.2s;
}

.intake-textarea::placeholder { color: var(--text-dim); }
.intake-textarea:focus { border-color: rgba(255,255,255,0.2); }

/* ── Results Screen ── */
.result-screen {
  display: none;
  text-align: center;
}

.result-screen.active { display: block; }

.score-ring {
  position: relative;
  width: 180px;
  height: 180px;
  margin: 0 auto 12px;
}

.score-ring svg {
  width: 100%;
  height: 100%;
  transform: rotate(-90deg);
}

.score-ring .track {
  fill: none;
  stroke: rgba(255,255,255,0.06);
  stroke-width: 6;
}

.score-ring .fill {
  fill: none;
  stroke: var(--text);
  stroke-width: 6;
  stroke-linecap: round;
  stroke-dasharray: 440;
  stroke-dashoffset: 440;
  transition: stroke-dashoffset 1.5s ease;
}

.score-ring .fill.red { stroke: var(--red); }

.score-number {
  position: absolute;
  inset: 0;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
}

.score-number .pct {
  font-family: var(--font-display);
  font-size: 3.2rem;
  font-weight: 800;
  line-height: 1;
  letter-spacing: -1px;
}

.score-number .label {
  font-family: var(--font-mono);
  font-size: 0.65rem;
  color: var(--text-dim);
  letter-spacing: 1px;
  text-transform: uppercase;
  margin-top: 4px;
}

.score-context {
  font-size: 0.88rem;
  color: var(--text-muted);
  margin-bottom: 40px;
  line-height: 1.6;
}

.score-context strong { color: var(--text); }

/* Tier bars */
.tier-bars {
  display: flex;
  gap: 16px;
  justify-content: center;
  margin-bottom: 48px;
}

.tier-bar {
  text-align: center;
}

.tier-bar .tier-label {
  font-family: var(--font-mono);
  font-size: 0.65rem;
  color: var(--text-dim);
  letter-spacing: 0.5px;
  margin-bottom: 8px;
}

.tier-bar .tier-track {
  width: 120px;
  height: 4px;
  background: rgba(255,255,255,0.06);
  border-radius: 2px;
  overflow: hidden;
  margin: 0 auto 6px;
}

.tier-bar .tier-fill {
  height: 100%;
  border-radius: 2px;
  background: var(--text);
  opacity: 0.5;
  transition: width 1.2s ease 0.3s;
}

.tier-bar .tier-pct {
  font-family: var(--font-mono);
  font-size: 0.72rem;
  color: var(--text-muted);
}

/* Insights */
.insights {
  text-align: left;
  margin: 0 auto 48px;
  max-width: 480px;
}

.insights h3 {
  font-family: var(--font-display);
  font-size: 1.1rem;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  margin-bottom: 20px;
}

.insight-card {
  padding: 18px 20px;
  background: var(--bg-elevated);
  border: 1px solid var(--border);
  border-radius: 6px;
  margin-bottom: 10px;
  text-align: left;
}

.insight-card .insight-label {
  font-family: var(--font-mono);
  font-size: 0.68rem;
  color: var(--text-dim);
  letter-spacing: 0.5px;
  text-transform: uppercase;
  margin-bottom: 6px;
}

.insight-card .insight-text {
  font-size: 0.88rem;
  color: var(--text-muted);
  line-height: 1.6;
}

.insight-card .insight-text strong { color: var(--text); }

/* Result email form */
.result-email {
  margin-top: 40px;
  padding-top: 32px;
  border-top: 1px solid rgba(255,255,255,0.06);
}

.result-email p {
  font-size: 0.88rem;
  color: var(--text-muted);
  margin-bottom: 16px;
}

@media (max-width: 600px) {
  .tier-bars { flex-direction: column; align-items: center; }
  .option-group { flex-direction: column; }
}
</style>
</head>
<body>

<!-- Hero -->
<div class="container">
  <div class="hero">
    <div class="logo">baseline<span class="period">.</span></div>
    <h1>
      <span class="line-neg">Average <span class="word-not">&ne;</span> Healthy.</span>
    </h1>
    <p class="hero-sub">Build your health record once. Use it everywhere. Take it with you forever.</p>
    <form class="signup-form" id="hero-form" action="https://formspree.io/f/mjgezrdp" method="POST">
      <input type="email" name="email" placeholder="your@email.com" required autocomplete="email">
      <button type="submit">Get early access</button>
    </form>
    <p class="trust-line">Free. Local-first. Your data stays yours.</p>
  </div>
</div>
<a href="#score-section" class="score-link">Calculate your score &darr;</a>

<div class="divider"></div>

<!-- Problem -->
<section>
  <div class="container">

    <h2>Your health data is everywhere<br>except where it's useful.</h2>
    <div class="pain-points">
      <div class="pain-point">
        <span class="pain-icon">01</span>
        <p>Lab results buried in email PDFs and patient portals you'll never log into again.</p>
      </div>
      <div class="pain-point">
        <span class="pain-icon">02</span>
        <p>Wearable data siloed in apps that don't talk to each other — or to your doctor.</p>
      </div>
      <div class="pain-point">
        <span class="pain-icon">03</span>
        <p>No tool tells you what's <em>missing</em>. You don't know what you don't know.</p>
      </div>
    </div>
    <div class="stat-callout">
      <strong>96M Americans are prediabetic.</strong> 47% have hypertension — half don't know it. 20% carry a genetic lipid risk factor invisible on standard tests.
    </div>
  </div>
</section>

<!-- Coverage -->
<section>
  <div class="container">
    <h2>You're closer than you think.</h2>
    <p style="color: var(--text-muted); margin-bottom: 8px; font-size: 0.9rem;">Your health has a coverage score. Not a wellness grade. A map of what you've measured — and what you haven't.</p>
    <div class="coverage-visual">
      <div class="coverage-bar">
        <span class="label">blood work</span>
        <div class="bar-track"><div class="bar-fill high" style="width: 82%"></div></div>
        <span class="pct">82%</span>
      </div>
      <div class="coverage-bar">
        <span class="label">cardiovascular</span>
        <div class="bar-track"><div class="bar-fill high" style="width: 75%"></div></div>
        <span class="pct">75%</span>
      </div>
      <div class="coverage-bar">
        <span class="label">sleep</span>
        <div class="bar-track"><div class="bar-fill med" style="width: 60%"></div></div>
        <span class="pct">60%</span>
      </div>
      <div class="coverage-bar">
        <span class="label">activity</span>
        <div class="bar-track"><div class="bar-fill high" style="width: 90%"></div></div>
        <span class="pct">90%</span>
      </div>
      <div class="coverage-bar">
        <span class="label">family history</span>
        <div class="bar-track"><div class="bar-fill low" style="width: 25%"></div></div>
        <span class="pct">25%</span>
      </div>
      <div class="coverage-bar">
        <span class="label">medications</span>
        <div class="bar-track"><div class="bar-fill high" style="width: 100%"></div></div>
        <span class="pct">100%</span>
      </div>
    </div>
    <p class="journey-text">
      I ran myself through 40 metrics. Started at <strong>42%</strong> coverage. Got to <strong>85%</strong> in a single session. Three moves totaling <strong>~$50</strong> would take most people from 40% to 80%.
    </p>
  </div>
</section>

<div class="divider"></div>

<!-- Top 10 -->
<section>
  <div class="container">

    <h2>Top 10 health metrics by ROI.</h2>
    <div class="metrics-list">
      <div class="metric-row">
        <span class="metric-rank">01</span>
        <span class="metric-name">Blood pressure</span>
        <span class="metric-cost">$40 one-time</span>
      </div>
      <div class="metric-row">
        <span class="metric-rank">02</span>
        <span class="metric-name">Lipid panel + ApoB</span>
        <span class="metric-cost">$30–50/yr</span>
      </div>
      <div class="metric-row">
        <span class="metric-rank">03</span>
        <span class="metric-name">Fasting insulin + metabolic panel</span>
        <span class="metric-cost">$40–60/yr</span>
      </div>
      <div class="metric-row">
        <span class="metric-rank">04</span>
        <span class="metric-name">Family history</span>
        <span class="metric-cost free">free</span>
      </div>
      <div class="metric-row">
        <span class="metric-rank">05</span>
        <span class="metric-name">Sleep regularity</span>
        <span class="metric-cost free">free</span>
      </div>
      <div class="metric-row">
        <span class="metric-rank">06</span>
        <span class="metric-name">Daily steps</span>
        <span class="metric-cost free">free</span>
      </div>
      <div class="metric-row">
        <span class="metric-rank">07</span>
        <span class="metric-name">Resting heart rate</span>
        <span class="metric-cost free">free</span>
      </div>
      <div class="metric-row">
        <span class="metric-rank">08</span>
        <span class="metric-name">Waist circumference</span>
        <span class="metric-cost">$3</span>
      </div>
      <div class="metric-row">
        <span class="metric-rank">09</span>
        <span class="metric-name">Medication list</span>
        <span class="metric-cost free">free</span>
      </div>
      <div class="metric-row">
        <span class="metric-rank">10</span>
        <span class="metric-name">Lp(a)</span>
        <span class="metric-cost">$30 once</span>
      </div>
    </div>
    <p class="metrics-note">$143/year combined. Several are free. Full methodology and 40-metric ranking coming soon.</p>
  </div>
</section>

<div class="divider"></div>

<!-- Cost Comparison -->
<section>
  <div class="container">
    <p class="section-label">Cost comparison</p>
    <h2>What you're paying for health data today.</h2>

    <table class="compare-table">
      <thead>
        <tr>
          <th>Product</th>
          <th>Cost/yr</th>
          <th>What it covers</th>
          <th>Foundation (T1)</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>Function Health</td>
          <td class="price">$365</td>
          <td>160+ lab tests, 2x/year</td>
          <td class="coverage-cell"><span class="coverage-inline"><span class="mini-bar" style="width:38px"></span> 62%</span></td>
        </tr>
        <tr>
          <td>InsideTracker</td>
          <td class="price">$249–589</td>
          <td>Blood + DNA + wearable</td>
          <td class="coverage-cell"><span class="coverage-inline"><span class="mini-bar" style="width:34px"></span> 55%</span></td>
        </tr>
        <tr>
          <td>Oura Ring</td>
          <td class="price">$369 yr 1</td>
          <td>Sleep, HRV, activity</td>
          <td class="coverage-cell"><span class="coverage-inline"><span class="mini-bar" style="width:14px"></span> 22%</span></td>
        </tr>
        <tr>
          <td>Whoop</td>
          <td class="price">$239</td>
          <td>Recovery, strain, sleep</td>
          <td class="coverage-cell"><span class="coverage-inline"><span class="mini-bar" style="width:14px"></span> 22%</span></td>
        </tr>
        <tr class="row-baseline">
          <td>Baseline T1</td>
          <td class="price">~$100</td>
          <td>All 10 foundation metrics</td>
          <td class="coverage-cell"><span class="coverage-inline"><span class="mini-bar" style="width:60px"></span> 100%</span></td>
        </tr>
      </tbody>
    </table>

    <p class="compare-note">
      These products are excellent at what they do. But none of them tell you what's <strong>missing</strong>. A Function Health member still has gaps in blood pressure monitoring, family history, medication context, and sleep regularity — things no blood test covers. <strong>7 of our 10 foundation metrics don't require a blood draw.</strong> Year 2+ cost drops to ~$70–110 (just the annual labs).
    </p>
  </div>
</section>

<div class="divider"></div>

<!-- How It Works -->
<section>
  <div class="container">

    <h2>Four steps to your coverage score.</h2>
    <div class="steps">
      <div class="step">
        <div class="step-num">01</div>
        <div class="step-title">Drop it in</div>
        <div class="step-desc">A lab PDF, a wearable export, or both</div>
      </div>
      <div class="step">
        <div class="step-num">02</div>
        <div class="step-title">We read it</div>
        <div class="step-desc">Parsed and organized on your machine</div>
      </div>
      <div class="step">
        <div class="step-num">03</div>
        <div class="step-title">See your gaps</div>
        <div class="step-desc">What you've covered and what's missing</div>
      </div>
      <div class="step">
        <div class="step-num">04</div>
        <div class="step-title">Know what's next</div>
        <div class="step-desc">Ranked by cost and impact</div>
      </div>
    </div>
    <p class="how-details">
      Drop a lab PDF. Connect your wearable. Answer 3 questions. See your score.<br>
      Runs locally as a CLI and <code>MCP server</code> — works with any AI assistant that supports the protocol.
    </p>
  </div>
</section>

<div class="divider"></div>

<!-- Story -->
<section>
  <div class="container">

    <h2>I ran myself through 40 metrics.</h2>
    <div class="story-block">
      <p>Seven draws. 200 biomarkers. Full blood work through Quest. My health coverage when I started: <strong>42%</strong>.</p>
      <p>The gaps weren't what I expected. I had comprehensive blood panels but had never collected family history. I tracked sleep duration religiously but not regularity. My wearable had 18 months of resting heart rate data — I'd never looked at the trend.</p>
      <p>The real find was my fasting insulin. Single draw: 3.5 mIU/L. Looks perfect. But across three draws over six months: <strong>3.5 &rarr; 8.2 &rarr; 13.9</strong>. A trend that a single snapshot would never catch.</p>
    </div>
    <div class="insulin-callout">
      <strong>3.5 &rarr; 13.9 mIU/L</strong> over 6 months. Each draw looked "normal" on its own. The trend told a different story. Insulin resistance shows up 10&ndash;15 years before a diabetes diagnosis — but only if you're tracking.
    </div>
  </div>
</section>

<!-- Intake / Score -->
<section class="cta-section" id="score-section">
  <div class="container">
    <h2>See your score.</h2>
    <p class="cta-sub" style="color:var(--text-muted);">9 questions. 60 seconds. No health data collected — just what you track.<br>
    Or <a href="https://chatgpt.com/g/g-69a200216dcc8191af219ebded578dc7-baseline-health-coverage" target="_blank" rel="noopener" class="ai-link">talk through it with AI &rarr;</a></p>

    <div class="intake" id="intake">
      <!-- Progress pips -->
      <div class="intake-progress">
        <div class="pip active" data-step="0"></div>
        <div class="pip" data-step="1"></div>
        <div class="pip" data-step="2"></div>
        <div class="pip" data-step="3"></div>
        <div class="pip" data-step="4"></div>
      </div>

      <!-- Step 0: Demographics -->
      <div class="intake-step active" data-step="0">
        <h3>About you</h3>
        <p class="step-hint">Used for percentile comparison. Not stored.</p>

        <p style="font-size:0.82rem;color:var(--text-muted);margin-bottom:10px;">Age range</p>
        <div class="option-group" data-field="age" data-type="single">
          <div class="opt-btn" data-value="20-29">20–29</div>
          <div class="opt-btn" data-value="30-39">30–39</div>
          <div class="opt-btn" data-value="40-49">40–49</div>
          <div class="opt-btn" data-value="50-59">50–59</div>
          <div class="opt-btn" data-value="60+">60+</div>
        </div>

        <p style="font-size:0.82rem;color:var(--text-muted);margin-bottom:10px;">Sex</p>
        <div class="option-group" data-field="sex" data-type="single">
          <div class="opt-btn" data-value="M">Male</div>
          <div class="opt-btn" data-value="F">Female</div>
        </div>

        <div class="intake-nav">
          <button class="back-btn hidden">&larr; Back</button>
          <button class="next-btn">Next &rarr;</button>
        </div>
      </div>

      <!-- Step 1: Blood work -->
      <div class="intake-step" data-step="1">
        <h3>Blood work</h3>
        <p class="step-hint">Had blood work in the last 2 years? Check what was included.</p>

        <div class="option-group vertical" data-field="bloodwork" data-type="multi">
          <div class="check-item" data-value="lipids">
            <div class="check-box"></div>
            <div class="check-label">Lipid panel <span class="sub">Cholesterol, LDL, HDL, triglycerides</span></div>
          </div>
          <div class="check-item" data-value="apob">
            <div class="check-box"></div>
            <div class="check-label">ApoB</div>
          </div>
          <div class="check-item" data-value="glucose">
            <div class="check-box"></div>
            <div class="check-label">Fasting glucose or HbA1c</div>
          </div>
          <div class="check-item" data-value="insulin">
            <div class="check-box"></div>
            <div class="check-label">Fasting insulin</div>
          </div>
          <div class="check-item" data-value="lpa">
            <div class="check-box"></div>
            <div class="check-label">Lp(a) <span class="sub">Lipoprotein(a) — usually not included</span></div>
          </div>
          <div class="check-item" data-value="hscrp">
            <div class="check-box"></div>
            <div class="check-label">hs-CRP <span class="sub">High-sensitivity C-reactive protein</span></div>
          </div>
          <div class="check-item" data-value="liver">
            <div class="check-box"></div>
            <div class="check-label">Liver enzymes <span class="sub">ALT, AST, or GGT</span></div>
          </div>
          <div class="check-item" data-value="cbc">
            <div class="check-box"></div>
            <div class="check-label">CBC <span class="sub">Complete blood count</span></div>
          </div>
          <div class="check-item" data-value="tsh">
            <div class="check-box"></div>
            <div class="check-label">TSH <span class="sub">Thyroid</span></div>
          </div>
          <div class="check-item" data-value="vitd">
            <div class="check-box"></div>
            <div class="check-label">Vitamin D or ferritin</div>
          </div>
          <div class="check-item" data-value="unsure" data-exclusive="true">
            <div class="check-box"></div>
            <div class="check-label">I'm not sure what was included</div>
          </div>
          <div class="check-item" data-value="none" data-exclusive="true">
            <div class="check-box"></div>
            <div class="check-label">No blood work</div>
          </div>
        </div>

        <div class="intake-nav">
          <button class="back-btn">&larr; Back</button>
          <button class="next-btn">Next &rarr;</button>
        </div>
      </div>

      <!-- Step 2: Body + Wearable -->
      <div class="intake-step" data-step="2">
        <h3>Body &amp; activity</h3>
        <p class="step-hint">Measurements and wearable data you currently have.</p>

        <p style="font-size:0.82rem;color:var(--text-muted);margin-bottom:10px;">Body measurements</p>
        <div class="option-group vertical" data-field="body" data-type="multi">
          <div class="check-item" data-value="bp">
            <div class="check-box"></div>
            <div class="check-label">Blood pressure <span class="sub">Own a cuff or have a recent reading</span></div>
          </div>
          <div class="check-item" data-value="waist">
            <div class="check-box"></div>
            <div class="check-label">Waist circumference</div>
          </div>
          <div class="check-item" data-value="weight">
            <div class="check-box"></div>
            <div class="check-label">Weight <span class="sub">Scale, even occasionally</span></div>
          </div>
        </div>

        <p style="font-size:0.82rem;color:var(--text-muted);margin-bottom:10px;margin-top:20px;">Wearable / activity tracking</p>
        <div class="option-group vertical" data-field="wearable" data-type="multi">
          <div class="check-item" data-value="steps">
            <div class="check-box"></div>
            <div class="check-label">Steps <span class="sub">Wearable or phone</span></div>
          </div>
          <div class="check-item" data-value="hr">
            <div class="check-box"></div>
            <div class="check-label">Heart rate</div>
          </div>
          <div class="check-item" data-value="sleep">
            <div class="check-box"></div>
            <div class="check-label">Sleep tracking</div>
          </div>
          <div class="check-item" data-value="vo2">
            <div class="check-box"></div>
            <div class="check-label">VO2 max estimate</div>
          </div>
          <div class="check-item" data-value="zones">
            <div class="check-box"></div>
            <div class="check-label">Heart rate zones <span class="sub">Zone 2 tracking</span></div>
          </div>
          <div class="check-item" data-value="no-wearable" data-exclusive="true">
            <div class="check-box"></div>
            <div class="check-label">No wearable or tracking</div>
          </div>
        </div>

        <div class="intake-nav">
          <button class="back-btn">&larr; Back</button>
          <button class="next-btn">Next &rarr;</button>
        </div>
      </div>

      <!-- Step 3: Context -->
      <div class="intake-step" data-step="3">
        <h3>Context</h3>
        <p class="step-hint">A few yes/no questions that round out the picture.</p>

        <div class="option-group vertical" data-field="context" data-type="multi">
          <div class="check-item" data-value="family">
            <div class="check-box"></div>
            <div class="check-label">I've asked my parents about heart disease, stroke, or diabetes in the family</div>
          </div>
          <div class="check-item" data-value="meds">
            <div class="check-box"></div>
            <div class="check-label">I could list my current medications + supplements right now</div>
          </div>
          <div class="check-item" data-value="phq9">
            <div class="check-box"></div>
            <div class="check-label">I've completed a depression screening (PHQ-9) in the last year <span class="sub">Or know what it is</span></div>
          </div>
        </div>

        <div class="intake-nav">
          <button class="back-btn">&larr; Back</button>
          <button class="next-btn">Next &rarr;</button>
        </div>
      </div>

      <!-- Step 4: Catch-all -->
      <div class="intake-step" data-step="4">
        <h3>Anything else?</h3>
        <p class="step-hint">Track something we didn't ask about? We want to know. (Optional)</p>

        <textarea class="intake-textarea" id="catchall" placeholder="e.g. CGM, DEXA scan, grip strength, testosterone, genetic testing..."></textarea>

        <div class="intake-nav">
          <button class="back-btn">&larr; Back</button>
          <button class="next-btn">See my score &rarr;</button>
        </div>
      </div>
    </div>

    <!-- Results -->
    <div class="result-screen" id="results">
      <div class="score-ring">
        <svg viewBox="0 0 160 160">
          <circle class="track" cx="80" cy="80" r="70"/>
          <circle class="fill" id="score-arc" cx="80" cy="80" r="70"/>
        </svg>
        <div class="score-number">
          <span class="pct" id="score-pct">0%</span>
          <span class="label">coverage</span>
        </div>
      </div>

      <p class="score-context" id="score-context"></p>

      <div class="tier-bars">
        <div class="tier-bar">
          <div class="tier-label">Foundation</div>
          <div class="tier-track"><div class="tier-fill" id="t1-fill" style="width:0%"></div></div>
          <div class="tier-pct" id="t1-pct">0%</div>
        </div>
        <div class="tier-bar">
          <div class="tier-label">Enhanced</div>
          <div class="tier-track"><div class="tier-fill" id="t2-fill" style="width:0%"></div></div>
          <div class="tier-pct" id="t2-pct">0%</div>
        </div>
      </div>

      <div class="insights" id="insights"></div>

      <div class="result-email">
        <p>We'll let you know when you can import your actual data and get a full assessment.</p>
        <form class="signup-form" id="result-form" action="https://formspree.io/f/mjgezrdp" method="POST" style="justify-content:center;">
          <input type="email" name="email" placeholder="your@email.com" required autocomplete="email">
          <input type="hidden" name="coverage_score" id="hidden-score" value="">
          <input type="hidden" name="catchall" id="hidden-catchall" value="">
          <button type="submit">Get early access</button>
        </form>
        <div class="form-success">You're on the list. We'll be in touch.</div>
      </div>
    </div>

  </div>
</section>

<!-- Footer -->
<footer>
  <div class="container">
    <p>
      Built in San Francisco with love &middot; <a href="https://x.com/a_e_deal" target="_blank" rel="noopener">@a_e_deal</a><br>
      Local-first. Your health data never touches our servers.
    </p>
  </div>
</footer>

<script>
// ── Form submissions (hero + result) ──
document.querySelectorAll('form').forEach(form => {
  form.addEventListener('submit', function(e) {
    e.preventDefault();
    const data = new FormData(this);
    fetch(this.action, {
      method: 'POST',
      body: data,
      headers: { 'Accept': 'application/json' }
    }).then(r => {
      if (r.ok) {
        this.style.display = 'none';
        const success = this.parentElement.querySelector('.form-success') ||
          this.nextElementSibling;
        if (success && success.classList.contains('form-success')) {
          success.style.display = 'block';
        } else {
          const msg = document.createElement('p');
          msg.className = 'form-success';
          msg.style.display = 'block';
          msg.textContent = "You're on the list. We'll be in touch.";
          this.parentElement.insertBefore(msg, this.nextSibling);
        }
        this.reset();
      }
    });
  });
});

// ── Query param deep-link (from ChatGPT) ──
(function() {
  const params = new URLSearchParams(window.location.search);
  const score = parseInt(params.get('score'));
  const t1 = parseInt(params.get('t1'));
  const t2 = parseInt(params.get('t2'));
  const insights = params.get('insights'); // comma-separated insight IDs

  if (!isNaN(score)) {
    // Hide form, show results directly
    const intake = document.getElementById('intake');
    const results = document.getElementById('results');
    if (intake) intake.style.display = 'none';
    if (results) results.classList.add('active');

    // Scroll to score section
    setTimeout(() => {
      document.getElementById('score-section').scrollIntoView({ behavior: 'smooth' });
    }, 300);

    // Animate score ring
    const circumference = 2 * Math.PI * 70;
    const offset = circumference - (score / 100) * circumference;
    const arc = document.getElementById('score-arc');
    arc.style.strokeDasharray = circumference;
    setTimeout(() => { arc.style.strokeDashoffset = offset; }, 400);
    if (score < 40) arc.classList.add('red');

    document.getElementById('score-pct').textContent = score + '%';

    // Context
    let ctx = '';
    if (score >= 80) ctx = "You're ahead of most people. Your data coverage is strong.";
    else if (score >= 60) ctx = "Solid foundation. A few targeted additions would get you to <strong>80%+</strong>.";
    else if (score >= 40) ctx = "You're closer than you think. <strong>Three moves totaling ~$50</strong> could nearly double your coverage.";
    else ctx = "Most people start here. The good news: the highest-ROI metrics are cheap or free.";
    ctx += ' <em style="color:var(--text-dim);font-size:0.82rem;">Score calculated via AI conversation.</em>';
    document.getElementById('score-context').innerHTML = ctx;

    // Tier bars
    if (!isNaN(t1)) {
      setTimeout(() => { document.getElementById('t1-fill').style.width = t1 + '%'; }, 500);
      document.getElementById('t1-pct').textContent = t1 + '%';
    }
    if (!isNaN(t2)) {
      setTimeout(() => { document.getElementById('t2-fill').style.width = t2 + '%'; }, 500);
      document.getElementById('t2-pct').textContent = t2 + '%';
    }

    // Insights from query param
    const INSIGHT_MAP = {
      'apob': { label: 'Lipid upgrade', text: 'When ApoB and LDL-C disagree on your risk, <strong>ApoB wins</strong>. Ask for it by name — your doctor probably won\'t order it otherwise. ~$15 add-on.' },
      'insulin': { label: 'Metabolic upgrade', text: 'Insulin resistance shows up <strong>10–15 years before a diabetes diagnosis</strong>. Fasting insulin catches it earliest. ~$15 add-on to your next lab order.' },
      'bp': { label: 'Blood pressure', text: '<strong>47% of US adults have hypertension. Half don\'t know.</strong> A $40 home cuff is the single highest-ROI health purchase.' },
      'lpa': { label: 'Lp(a)', text: '<strong>20% of people have elevated Lp(a)</strong> — genetically fixed, invisible on standard panels. One draw, ~$30, once in your entire life.' },
      'family': { label: 'Family history', text: 'One conversation with your parents changes your entire risk model. <strong>The cheapest health data you\'ll ever collect.</strong>' },
      'sleep': { label: 'Sleep tracking', text: '<strong>Sleep regularity predicts mortality more than duration.</strong> If your device tracks it, turn it on.' },
      'no-wearable': { label: 'No wearable needed', text: 'Your phone already counts steps. Each additional <strong>1,000 steps/day = ~15% lower all-cause mortality</strong>.' },
      'meds': { label: 'Medication context', text: '<strong>If your tracker doesn\'t know what you\'re taking, every other number gets misread.</strong> Most underrated health metric.' },
      'phq9': { label: 'Mental health screen', text: 'The PHQ-9 is a free, 3-minute depression screen. <strong>Depression independently raises cardiovascular risk 80%.</strong>' },
      'unsure': { label: 'Get your records', text: 'Ask your doctor\'s office for a copy of your last lab results. <strong>You paid for it — you own it.</strong>' },
      't1-complete': { label: 'Foundation complete', text: 'You\'re ahead of <strong>95% of people</strong>. Your foundation is solid.' },
    };

    if (insights) {
      const ids = insights.split(',').map(s => s.trim()).filter(id => INSIGHT_MAP[id]);
      if (ids.length > 0) {
        const insightsEl = document.getElementById('insights');
        let html = '<h3>What we\'d tell you</h3>';
        ids.slice(0, 3).forEach(id => {
          const ins = INSIGHT_MAP[id];
          html += '<div class="insight-card"><div class="insight-label">' + ins.label + '</div><div class="insight-text">' + ins.text + '</div></div>';
        });
        insightsEl.innerHTML = html;
      }
    }

    // Set hidden fields
    document.getElementById('hidden-score').value = score + '%';
    document.getElementById('hidden-catchall').value = 'via-chatgpt';
  }
})();

// ── Score link visibility ──
(function() {
  const link = document.querySelector('.score-link');
  const target = document.getElementById('score-section');
  if (link && target) {
    window.addEventListener('scroll', function() {
      const rect = target.getBoundingClientRect();
      link.classList.toggle('hidden', rect.top < window.innerHeight * 0.5);
    }, { passive: true });
  }
})();

// ── Intake Form Engine ──
(function() {
  const TOTAL_STEPS = 5;
  let currentStep = 0;
  const answers = { age: null, sex: null, bloodwork: [], body: [], wearable: [], context: [], catchall: '' };

  // Weight map — mirrors score.py TIER1_WEIGHTS + TIER2_WEIGHTS
  // T1 = 60 pts, T2 = 25 pts, total = 85
  const WEIGHTS = {
    // T1
    bp:       { tier: 1, weight: 8,  key: 'blood_pressure' },
    lipids:   { tier: 1, weight: 8,  key: 'lipid_apob' },
    metabolic:{ tier: 1, weight: 8,  key: 'metabolic' },
    family:   { tier: 1, weight: 6,  key: 'family_history' },
    sleep:    { tier: 1, weight: 5,  key: 'sleep' },
    steps:    { tier: 1, weight: 4,  key: 'steps' },
    rhr:      { tier: 1, weight: 4,  key: 'resting_hr' },
    waist:    { tier: 1, weight: 5,  key: 'waist' },
    meds:     { tier: 1, weight: 4,  key: 'medications' },
    lpa:      { tier: 1, weight: 8,  key: 'lpa' },
    // T2
    vo2:      { tier: 2, weight: 5,  key: 'vo2_max' },
    hrv:      { tier: 2, weight: 2,  key: 'hrv' },
    hscrp:    { tier: 2, weight: 3,  key: 'hscrp' },
    liver:    { tier: 2, weight: 2,  key: 'liver' },
    cbc:      { tier: 2, weight: 2,  key: 'cbc' },
    tsh:      { tier: 2, weight: 2,  key: 'thyroid' },
    vitd:     { tier: 2, weight: 3,  key: 'vitamin_d_ferritin' },
    weight:   { tier: 2, weight: 2,  key: 'weight_trends' },
    phq9:     { tier: 2, weight: 2,  key: 'phq9' },
    zone2:    { tier: 2, weight: 2,  key: 'zone2' },
  };

  // Map intake answers → covered weight keys
  function mapAnswers() {
    const covered = new Set();
    const bw = answers.bloodwork;
    const bd = answers.body;
    const wr = answers.wearable;
    const cx = answers.context;

    // "I'm not sure" → assume standard panel
    if (bw.includes('unsure')) {
      covered.add('lipids');
      covered.add('metabolic');
      covered.add('cbc');
      covered.add('liver');
    }

    // Blood work specifics
    if (bw.includes('lipids'))  covered.add('lipids');
    if (bw.includes('apob'))   covered.add('lipids'); // ApoB implies lipids covered
    if (bw.includes('glucose') || bw.includes('insulin')) covered.add('metabolic');
    if (bw.includes('lpa'))    covered.add('lpa');
    if (bw.includes('hscrp'))  covered.add('hscrp');
    if (bw.includes('liver'))  covered.add('liver');
    if (bw.includes('cbc'))    covered.add('cbc');
    if (bw.includes('tsh'))    covered.add('tsh');
    if (bw.includes('vitd'))   covered.add('vitd');

    // Body
    if (bd.includes('bp'))     covered.add('bp');
    if (bd.includes('waist'))  covered.add('waist');
    if (bd.includes('weight')) covered.add('weight');

    // Wearable
    if (wr.includes('steps'))  covered.add('steps');
    if (wr.includes('hr'))     { covered.add('rhr'); covered.add('hrv'); }
    if (wr.includes('sleep'))  covered.add('sleep');
    if (wr.includes('vo2'))    covered.add('vo2');
    if (wr.includes('zones'))  covered.add('zone2');

    // Context
    if (cx.includes('family')) covered.add('family');
    if (cx.includes('meds'))   covered.add('meds');
    if (cx.includes('phq9'))   covered.add('phq9');

    return covered;
  }

  function computeScore(covered) {
    let t1Total = 0, t1Covered = 0, t2Total = 0, t2Covered = 0;
    for (const [key, m] of Object.entries(WEIGHTS)) {
      if (m.tier === 1) { t1Total += m.weight; if (covered.has(key)) t1Covered += m.weight; }
      else              { t2Total += m.weight; if (covered.has(key)) t2Covered += m.weight; }
    }
    const total = t1Total + t2Total;
    const coveredWeight = t1Covered + t2Covered;
    return {
      pct: Math.round(coveredWeight / total * 100),
      t1Pct: Math.round(t1Covered / t1Total * 100),
      t2Pct: Math.round(t2Covered / t2Total * 100),
      t1Covered, t1Total, t2Covered, t2Total,
      coveredWeight, total,
    };
  }

  // Insight library — keyed by gap condition
  const INSIGHTS = [
    {
      id: 'apob',
      condition: (bw, covered) => bw.includes('lipids') && !bw.includes('apob'),
      label: 'Lipid upgrade',
      text: 'When ApoB and LDL-C disagree on your risk, <strong>ApoB wins</strong>. It\'s causally linked to atherosclerosis. Ask for it by name — your doctor probably won\'t order it otherwise. ~$15 add-on.',
      tier: 1, weight: 8,
    },
    {
      id: 'insulin',
      condition: (bw) => (bw.includes('glucose') && !bw.includes('insulin')),
      label: 'Metabolic upgrade',
      text: 'Insulin resistance shows up <strong>10–15 years before a diabetes diagnosis</strong>. Fasting glucose misses early-stage IR. Fasting insulin catches it. ~$15 add-on to your next lab order.',
      tier: 1, weight: 8,
    },
    {
      id: 'bp',
      condition: (bw, covered) => !covered.has('bp'),
      label: 'Blood pressure',
      text: '<strong>47% of US adults have hypertension. Half don\'t know.</strong> Each 20 mmHg above 115 systolic doubles CVD mortality. A $40 home cuff is the single highest-ROI health purchase.',
      tier: 1, weight: 8,
    },
    {
      id: 'lpa',
      condition: (bw) => !bw.includes('lpa'),
      label: 'Lp(a)',
      text: '<strong>20% of people have elevated Lp(a)</strong> — genetically fixed, invisible on standard panels. One draw, ~$30, once in your entire life. Either changes your risk model permanently or it doesn\'t.',
      tier: 1, weight: 8,
    },
    {
      id: 'family',
      condition: (bw, covered) => !covered.has('family'),
      label: 'Family history',
      text: 'Parental CVD before 60 roughly doubles your risk. <strong>One conversation with your parents changes your entire risk model.</strong> The cheapest, highest-ROI health data you\'ll ever collect.',
      tier: 1, weight: 6,
    },
    {
      id: 'sleep',
      condition: (bw, covered) => !covered.has('sleep'),
      label: 'Sleep tracking',
      text: '<strong>Sleep regularity predicts mortality more than sleep duration.</strong> 8 hours doesn\'t help if your bedtime swings by 2 hours. If your device tracks it, turn it on.',
      tier: 1, weight: 5,
    },
    {
      id: 'no-wearable',
      condition: (bw, covered, wr) => wr.includes('no-wearable'),
      label: 'No wearable needed',
      text: 'Your phone already counts steps. Each additional <strong>1,000 steps/day = ~15% lower all-cause mortality</strong>. No wearable required — just carry your phone.',
      tier: 1, weight: 4,
    },
    {
      id: 'meds',
      condition: (bw, covered) => !covered.has('meds'),
      label: 'Medication context',
      text: 'Statins change your lipids. Beta-blockers suppress HR and HRV. <strong>If your tracker doesn\'t know what you\'re taking, every other number gets misread.</strong> Most underrated health metric.',
      tier: 1, weight: 4,
    },
    {
      id: 'phq9',
      condition: (bw, covered, wr, cx) => !cx.includes('phq9'),
      label: 'Mental health screen',
      text: 'The PHQ-9 is a free, 3-minute depression screen. <strong>Depression independently raises cardiovascular risk 80%.</strong> Worth the 3 minutes.',
      tier: 2, weight: 2,
    },
    {
      id: 'unsure',
      condition: (bw) => bw.includes('unsure'),
      label: 'Get your records',
      text: 'Ask your doctor\'s office for a copy of your last lab results. <strong>You paid for it — you own it.</strong> Knowing what was tested is the first step.',
      tier: 0, weight: 100, // always show if applicable
    },
    {
      id: 't1-complete',
      condition: (bw, covered) => {
        const t1Keys = Object.entries(WEIGHTS).filter(([,m]) => m.tier === 1).map(([k]) => k);
        return t1Keys.every(k => covered.has(k));
      },
      label: 'Foundation complete',
      text: 'You\'re ahead of <strong>95% of people</strong>. Your foundation is solid — the remaining gaps are in the enhanced picture. Most people never get this far.',
      tier: 0, weight: 100,
    },
  ];

  function pickInsights(covered) {
    const bw = answers.bloodwork;
    const wr = answers.wearable;
    const cx = answers.context;
    const applicable = INSIGHTS.filter(i => i.condition(bw, covered, wr, cx));
    // Sort: tier 0 specials first, then T1 by weight desc, then T2
    applicable.sort((a, b) => {
      if (a.tier === 0 && b.tier !== 0) return -1;
      if (b.tier === 0 && a.tier !== 0) return 1;
      if (a.tier !== b.tier) return a.tier - b.tier;
      return b.weight - a.weight;
    });
    return applicable.slice(0, 3);
  }

  // ── UI Logic ──

  // Single-select option buttons
  document.querySelectorAll('.option-group[data-type="single"] .opt-btn').forEach(btn => {
    btn.addEventListener('click', function() {
      const group = this.closest('.option-group');
      group.querySelectorAll('.opt-btn').forEach(b => b.classList.remove('selected'));
      this.classList.add('selected');
      answers[group.dataset.field] = this.dataset.value;
    });
  });

  // Multi-select check items
  document.querySelectorAll('.check-item').forEach(item => {
    item.addEventListener('click', function() {
      const group = this.closest('.option-group');
      const field = group.dataset.field;
      const val = this.dataset.value;
      const isExclusive = this.dataset.exclusive === 'true';

      if (isExclusive) {
        // Deselect all others, toggle this
        group.querySelectorAll('.check-item').forEach(ci => {
          if (ci !== this) ci.classList.remove('checked');
        });
        this.classList.toggle('checked');
      } else {
        // Deselect exclusive items, toggle this
        group.querySelectorAll('.check-item[data-exclusive="true"]').forEach(ci => ci.classList.remove('checked'));
        this.classList.toggle('checked');
      }

      // Rebuild answer array
      answers[field] = [];
      group.querySelectorAll('.check-item.checked').forEach(ci => {
        answers[field].push(ci.dataset.value);
      });
    });
  });

  // Step navigation
  function showStep(n) {
    document.querySelectorAll('.intake-step').forEach(s => s.classList.remove('active'));
    const step = document.querySelector(`.intake-step[data-step="${n}"]`);
    if (step) step.classList.add('active');

    document.querySelectorAll('.intake-progress .pip').forEach(p => {
      const ps = parseInt(p.dataset.step);
      p.classList.remove('active', 'done');
      if (ps === n) p.classList.add('active');
      else if (ps < n) p.classList.add('done');
    });

    currentStep = n;
  }

  document.querySelectorAll('.next-btn').forEach(btn => {
    btn.addEventListener('click', function() {
      if (currentStep < TOTAL_STEPS - 1) {
        showStep(currentStep + 1);
      } else {
        // Final step — compute and show results
        answers.catchall = document.getElementById('catchall').value.trim();
        showResults();
      }
    });
  });

  document.querySelectorAll('.back-btn').forEach(btn => {
    btn.addEventListener('click', function() {
      if (currentStep > 0) showStep(currentStep - 1);
    });
  });

  function showResults() {
    const covered = mapAnswers();
    const score = computeScore(covered);
    const insights = pickInsights(covered);
    const isApprox = answers.bloodwork.includes('unsure');

    // Hide form, show results
    document.getElementById('intake').style.display = 'none';
    const resultEl = document.getElementById('results');
    resultEl.classList.add('active');

    // Animate score ring
    const circumference = 2 * Math.PI * 70; // ~440
    const offset = circumference - (score.pct / 100) * circumference;
    const arc = document.getElementById('score-arc');
    arc.style.strokeDasharray = circumference;
    setTimeout(() => { arc.style.strokeDashoffset = offset; }, 50);
    if (score.pct < 40) arc.classList.add('red');

    // Score number
    document.getElementById('score-pct').textContent = (isApprox ? '~' : '') + score.pct + '%';

    // Context text
    let ctx = '';
    if (score.pct >= 80) ctx = "You're ahead of most people. Your data coverage is strong.";
    else if (score.pct >= 60) ctx = "Solid foundation. A few targeted additions would get you to <strong>80%+</strong>.";
    else if (score.pct >= 40) ctx = "You're closer than you think. <strong>Three moves totaling ~$50</strong> could nearly double your coverage.";
    else ctx = "Most people start here. The good news: the highest-ROI metrics are cheap or free.";
    if (isApprox) ctx += ' <em style="color:var(--text-dim);font-size:0.82rem;">(Score is approximate — we assumed a standard panel.)</em>';
    document.getElementById('score-context').innerHTML = ctx;

    // Tier bars
    setTimeout(() => {
      document.getElementById('t1-fill').style.width = score.t1Pct + '%';
      document.getElementById('t2-fill').style.width = score.t2Pct + '%';
    }, 100);
    document.getElementById('t1-pct').textContent = score.t1Pct + '%';
    document.getElementById('t2-pct').textContent = score.t2Pct + '%';

    // Insights
    const insightsEl = document.getElementById('insights');
    if (insights.length > 0) {
      let html = '<h3>What we\'d tell you</h3>';
      insights.forEach(ins => {
        html += `<div class="insight-card">
          <div class="insight-label">${ins.label}</div>
          <div class="insight-text">${ins.text}</div>
        </div>`;
      });
      insightsEl.innerHTML = html;
    }

    // Hidden fields for Formspree
    document.getElementById('hidden-score').value = score.pct + '%';
    document.getElementById('hidden-catchall').value = answers.catchall;
  }
})();
</script>

</body>
</html>
